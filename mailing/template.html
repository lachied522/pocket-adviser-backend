<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
        <style>
            body {
                font-family: 'Inter', sans-serif;
                max-width: 960px;
                margin-right: auto;
                margin-left: auto;
            }
            .main-text {
                white-space: pre-wrap;
            }
            table {
                font-family: Arial, sans-serif;
                border-collapse: collapse;
                width: 100%;
                font-weight: 500;
            }
            th {
                background-color: #f2f2f2;
                border: 1px solid #dddddd;
                text-align: left;
                padding: 8px;
            }
            td {
                border: 1px solid #dddddd;
                text-align: left;
                padding: 8px;
            }
            tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            .empty-message {
                margin-top: 20px;
                padding: 15px;
                border: 1px solid #dddddd;
                border-radius: 10px;
                background-color: #f9f9f9;
                text-align: center;
                color: #666;
            }
            .article-container {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
            }
            .article {
                position: relative;
                border: 1px solid #dddddd;
                border-radius: 10px;
                overflow: hidden;
                width: 192px;
                /* height: 144px; */
                /* box-shadow: 0 2px 4px rgba(0,0,0,0.1); */
                transition: transform 0.2s ease;
            }
            .article img {
                width: 100%;
                height: auto;
                border-radius: 10px;
            }
            .article a {
                display: block;
                position: relative;
                color: white;
                text-decoration: none;
            }
            .article a::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
            }
            .article a:hover::after {
                background: rgba(0, 0, 0, 0.7);
            }
            .article-content {
                z-index: 999;
                position: absolute;
                bottom: 0;
                left: 0;
                padding: 6px;
                width: 100%;
                box-sizing: border-box;
            }
            .article-title {
                font-size: 16px;
                margin: 0;
                color: white;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            .article-text {
                font-size: 12px;
                color: #ccc;
                margin-top: 4px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        </style>
    </head>
    <body>
        <h3>Market update {{ date }}</h3>
        
        <p class="main-text">{{ body }}</p>

        <h3>Trade ideas</h3>

        {% if articles|length < 1 %}
        <div class="empty-message">No trade ideas were generated</div>
        {% else %}
        <table>
            <thead>
                <tr>
                    <td>Transaction</td>
                    <td>Symbol</td>
                    <td>Name</td>
                    <td>Units</td>
                    <td>Price</td>
                    <td>Value</td>
                </tr>
            </thead>

            <tbody>
                {% for row in dataframe %}
                <tr>
                    <td>{{ row.transaction }}</td>
                    <td>{{ row.symbol }}</td>
                    <td>{{ row.name }}</td>
                    <td>{{ row.units }}</td>
                    <td>{{ row.price }}</td>
                    <td>{{ row.value }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

        <h3>Articles you might like</h3>

        <div class="article-container">
            {% for article in articles %}
            <div class="article">
                <a href="{{ article.url }}" target="_blank">
                    <img src="{{ article.image }}" alt="{{ article.title }}">
                    <div class="article-content">
                        <h2 class="article-title">{{ article.title }}</h2>
                        <p class="article-text">{{ article.text }}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </body>
</html>